<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Cypress WICED HTTP Server-Sent Event (SSE) Example Application</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />


    <style type="text/css">
      #flot-placeholder{width:350px;height:300px;}        
  </style>
  <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="http://www.pureexample.com/js/flot/excanvas.min.js"></script><![endif]-->
  <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
  <script type="text/javascript" src="jquery.flot.min.js"></script>
  <script type="text/javascript">
      var data = [[1, 130], [2, 40], [3, 80], [4, 160], [5, 159], [6, 370], [7, 330], [8, 350], [9, 370], [10, 400], [11, 330], [12, 350]];

      var dataset = [{label: "line1",data: data}];

      var options = {
          series: {
              lines: { show: true },
              points: {
                  radius: 3,
                  show: true
              }
          }
      };

      $(document).ready(function () {
          $.plot($("#flot-placeholder"), dataset, options);
      });
  </script>


  </head>
  <body onload="reloadData( )" style="font-family:verdana;">
    <table border='0' cellpadding='0' cellspacing='0' width="98%">
      <tr style="height:20px"><td>&nbsp;</td></tr>
      <tr style="border-collapse: collapse; padding: 0;">
        <td style="width:20px"></td>
        <td style="width:152px"><img src="../../zenitron.gif" alt="Logo" /></td>
        <td style="vertical-align:middle; text-align:center; font: bold 25px/100% Verdana, Arial, Helvetica, sans-serif;background-image:url('../../line.png');">
        Zenitron IoT&copy;   Demo using Wi-Fi connection
        </td>
        <td style="width:137px;background-image:url('../../line.png');"></td>
      </tr>
      <tr><td>&nbsp;</td></tr>
    </table>


    <div style="margin-left:20px" id="main_text" >
      <!-- <p>This webpage demonstrates how a webserver notifies its clients using <b>Server-Sent Event (SSE)</b>.</p> -->
    </div>

    <table border='0' cellpadding='0' cellspacing='0' width="98%">
      <tr style="border-collapse: collapse; padding: 0;">
        <td style="width:20px"></td>
        <td style="width:152px"><img src="../../cypress.jpg" alt="Logo" /></td>
        <td style="width:152px"><img src="../../rohm.jpg" alt="Logo" /></td>
        <td style="width:152px"><img src="../../azurewave.png" alt="Logo" /></td>  
        <td style="width:152px"><img src="../../microchip.png" alt="Logo" /></td>  
      </tr>
    </table>


  </div>

  <div id="flot-placeholder"></div>

  <div id="result"></div>
  <script>
    if(typeof(EventSource) !== "undefined") {
      var source = new EventSource("events");
        source.onmessage = function(event) 
        {
          document.getElementById("result").innerHTML += event.data + "<br>";
        };
      } 
      else 
      {
        document.getElementById("result").innerHTML = "Sorry, your browser does not support server-sent events...";
      }
    </script>
  </body>
</html>